<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>FORM</title>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
			crossorigin="anonymous"
		/>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
		<!-- CSS CDN -->
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.min.css"
		/>
		<!-- <link rel="stylesheet" href="style.css">-->
		<!-- datetimepicker jQuery CDN -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.full.min.js"></script>
	</head>

	<body>
		<div class="container">
			<div class="form-div">
				<h1>Post data form</h1>

				<form action="/api/proxy" method="post">
					<div class="mb-3">
						<label for="publisher_id" class="form-label">publisher_id</label>
						<input
							type="text"
							class="form-control"
							name="publisher_id"
							id="publisher_id"
						/>
					</div>

					<div class="mb-3">
						<label for="caller_number" class="form-label">caller_number</label>
						<input
							type="text"
							class="form-control"
							name="caller_number"
							id="caller_number"
							aria-describedby="emailHelp"
						/>
					</div>

					<div class="mb-3">
						<label class="form-label" for="first_name">first_name</label>
						<input
							type="text"
							class="form-control"
							name="first_name"
							id="first_name"
						/>
					</div>
					<div class="mb-3">
						<label class="form-label" for="last_name">last_name</label>
						<input
							type="text"
							class="form-control"
							name="last_name"
							id="last_name"
						/>
					</div>
					<div class="mb-3">
						<label class="form-label" for="email">Email</label>
						<input type="email" class="form-control" name="email" id="email" />
					</div>
					<div class="mb-3">
						<label class="form-label" for="state">State</label>
						<input type="text" class="form-control" name="state" id="state" />
					</div>
					<div class="mb-3">
						<label class="form-label" for="caller_zip">Zip</label>
						<input
							type="text"
							class="form-control"
							name="caller_zip"
							id="caller_zip"
						/>
					</div>

					<button type="submit" class="btn btn-primary">Submit</button>
				</form>
			</div>
		</div>

		<script>
			document
				.querySelector("form")
				.addEventListener("submit", async (event) => {
					event.preventDefault();

					const formData = new FormData(event.target);
					const data = Object.fromEntries(formData.entries());

					try {
						const response = await fetch("/api/proxy", {
							method: "POST",
							headers: {
								"Content-Type": "application/json",
							},
							body: JSON.stringify(data),
						});

						if (response.ok) {
							const result = await response.json();
							console.log("Success:", result);
						} else {
							console.error("Error:", await response.text());
						}
					} catch (error) {
						console.error("Error:", error);
					}
				});
		</script>

		<script>
			$(document).ready(function () {
				$("#original_lead_submit_date").datetimepicker({
					format: "Y-m-d H:i:s",
					step: 15, // optional: set the minute step size
				});
			});

			$(document).ready(function () {
				$("#dob").datetimepicker({
					format: "Y-m-d",
				});
			});
		</script>

		<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"></script>
		<script defer src="/_vercel/insights/proxy.js"></script>
	</body>
</html>
